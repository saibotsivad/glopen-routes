# User API Tokens

These routes manage tokens that are owned by a single user, as opposed to being owned by an organization or team.

To use in `glopen`:

```js
// glopen.config.js
import { shared, userApiTokens } from '@saibotsivad/glopen-routes'
export default {
	merge: [
		...shared(),
		...userApiTokens({
			api: '/api/v1' // optional
		})
	],
}
```

The components are:

- [`parameter: apiTokenId`](./openapi/components/parameters/apiTokenId.@.js)
- [`schema: apiToken`](./openapi/components/schemas/apiToken.@.js)
- [`tag: userApiTokens`](./openapi/tags.@.js)
- [shared components](../_shared/README.md)

The routes are:

##### [`POST /self/apiTokens`](./routes/paths/self/apiTokens/post.@.js)

Create a new API token, which will be managed by the requesting user.

The token secret is generated by the server, and is returned as a separate property, visible only one time on this response.

- `request.controller.apiToken.create: (request: Request) => { apiToken: ApiToken, secret: String }`

##### [`GET /self/apiTokens`](./routes/paths/self/apiTokens/get.@.js)

Fetch the list of API tokens owned by the requesting user.

- `request.controller.apiToken.list: (request: Request) => { apiTokens: Array<ApiTokens> }`

##### [`DELETE /self/apiTokens/{apiTokenId}`](./routes/paths/self/apiTokens/{apiTokenId}/delete.@.js)

Delete an API token owned by the requesting user.

- `request.controller.apiToken.remove: (request: Request) => null`

##### [`PATCH /self/apiTokens/{apiTokenId}`](./routes/paths/self/apiTokens/{apiTokenId}/patch.@.js)

Sparse update to an API token owned by the requesting user.

The token secret is generated by the server, and is returned as a separate property, visible only one time on this response.

- `request.controller.apiToken.sparseUpdate: (request: Request) => { apiToken: ApiToken, secret: String }`
