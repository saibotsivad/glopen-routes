# Team API Tokens

These routes manage tokens that are owned and managed by members of a team, as opposed to being owned by a single user.

To use in `glopen`:

```js
// glopen.config.js
import { shared, teams, teamApiTokens } from '@saibotsivad/glopen-routes'
export default {
	merge: [
		...shared(),
		...teams({
			api: '/api/v1' // optional
		}),
		...teamApiTokens({
			api: '/api/v1' // optional
		}),
	],
}
```

The components are:

- [`parameter: apiTokenId`](./openapi/components/parameters/apiTokenId.@.js)
- [`schema: apiToken`](./openapi/components/schemas/apiToken.@.js)
- [`tag: teamApiTokens`](./openapi/tags.@.js)
- [shared components](../_shared/README.md)

The routes are:

##### [`POST /teams/{teamId}/apiTokens`](./routes/paths/teams/{teamId}/apiTokens/post.@.js)

Create a new API token, which will be managed by the team identified in the path. The requesting user must be a member of that team.

The token secret is generated by the server, and is returned as a separate property, visible only one time on this response.

- `request.controller.apiToken.create: (request: Request) => { apiToken: ApiToken, secret: String }`

##### [`GET /teams/{teamId}/apiTokens`](./routes/paths/teams/{teamId}/apiTokens/get.@.js)

Fetch the list of API tokens managed by the team, if the user is a member of that team.

- `request.controller.apiToken.list: (request: Request) => { apiTokens: Array<ApiTokens> }`

##### [`DELETE /teams/{teamId}/apiTokens/{apiTokenId}`](./routes/paths/teams/{teamId}/apiTokens/{apiTokenId}/delete.@.js)

Delete an API token owned by the team, if the requesting user is a member.

- `request.controller.apiToken.remove: (request: Request) => null`

##### [`PATCH /teams/{teamId}/apiTokens/{apiTokenId}`](./routes/paths/teams/{teamId}/apiTokens/{apiTokenId}/patch.@.js)

Sparse update to an API token owned by the team, if the requesting user is a member.

The token secret is generated by the server, and is returned as a separate property, visible only one time on this response.

- `request.controller.apiToken.sparseUpdate: (request: Request) => { apiToken: ApiToken, secret: String }`
